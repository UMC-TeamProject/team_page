<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>문이열리네요그대가들어오조</title>
    <link rel="stylesheet" href="Member3.css" />
    <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"
    ;
  ></script>

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import {
      collection,
      addDoc,
    } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDtd0ZEv8_gZnCAPRFooq1oQwx7NeqCXlc",
      authDomain: "team1-introduce.firebaseapp.com",
      projectId: "team1-introduce",
      storageBucket: "team1-introduce.appspot.com",
      messagingSenderId: "438596670189",
      appId: "1:438596670189:web:0e0b3996e54863e8ebf2e4",
      measurementId: "G-9QNJB5ZJ74",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let docs = await getDocs(collection(db, "guestBook"));
      docs.forEach((doc) => {
        let row = doc.data();
        
        let username = row["username"];
        let comment = row["comment"];
        let date = row["date"];
        let img = row["img"];
        
      
        let add = `
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <div class="imgTitleText" id="newUserImg">
                          <img class="user" id="userImg" src="../../PostUpload/userImg/newUserImg/${img}" />
                            <div class="titleText">
                                <h5 class="card-title">${username}님</h5>
                                <p class="card-text">${comment}</p>
                            </div>
                        </div>
                        <div class="cardBottom">
                        <h6 class="card-subtitle text-muted">${date}</h6>
                        <a href="#" class="card-link">답글쓰기</a>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            `;

        $("#cards").append(add);
      });
    </script>

  </head>

  <body>

    <script>
      function goToParentFolder() {
        window.parent.location.href = '../../PostUpload/PostUpload.html';
      }
    </script>
    

    <div class="guestBook-frame">
      <div class="guestBook">
        <div class="title">
          <h1>방명록</h1>
          <button class="btn" type="button" onClick="goToParentFolder()">글쓰기</button>
        </div>
       
        
        <div class="guestBox">
          <div class="row row-cols-1 row-cols-md-3" id="cards">
                   

        </div>
        </div>

        <div class="moreContent">
          <button class="btn" type="button" onClick="goToParentFolder()">더보기</button>
      </div>
    </div>
  </body>
</html>
