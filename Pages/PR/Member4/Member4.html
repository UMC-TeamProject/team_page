<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <title>Bootstrap Example</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div class="back">
        <p class="title">자격증</p>
        <div class="list">
            <input type="file" class="real-upload" accept="image/*" required multiple>

            <ul class="image-preview"></ul>
            <button class="upload" type="button">+
            </button>
        </div>

    </div>


    <script>
        function getImageFiles(e) {
            const uploadFiles = [];
            const files = e.currentTarget.files;
            const imagePreview = document.querySelector('.image-preview');
            const docFrag = new DocumentFragment();

            if ([...files].length >= 7) {
                alert('이미지는 최대 6개 까지 업로드가 가능합니다.');
                return;
            }

            // 파일 타입 검사
            [...files].forEach(file => {
                if (!file.type.match("image/.*")) {
                    alert('이미지 파일만 업로드가 가능합니다.');
                    return
                }

                // 파일 갯수 검사
                if ([...files].length < 7) {
                    uploadFiles.push(file);
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const preview = createElement(e, file);
                        imagePreview.appendChild(preview);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function createElement(e, file) {
            const li = document.createElement('li');
            const img = document.createElement('img');
            img.setAttribute('src', e.target.result);
            img.setAttribute('data-file', file.name);
            li.appendChild(img);

            return li;
        }

        const realUpload = document.querySelector('.real-upload');
        const upload = document.querySelector('.upload');

        upload.addEventListener('click', () => realUpload.click());

        realUpload.addEventListener('change', getImageFiles);

        //-여기부터 테스트--//


    </script>
</body>